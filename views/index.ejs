<%- include('partials/header.ejs') %>


<div class="d-flex flex-column p-3 gap-4 py-md-4 align-items-center justify-content-center">
    <div class="task-list list-group gap-3 border-0">
        <% taskList.forEach(task => { %> 

        <div class="task list-group-item d-flex align-items-center gap-3 py-3 rounded-2 shadow">
            <input class="form-check-input flex-shrink-0 my-1" id="task<%= task.id %>" type="checkbox" value="" aria-label="task" style="font-size: 1.375em;">
            <div class="form-checked-content d-flex align-items-center gap-3 w-100">
                <span class="me-auto"><%= task.title %></span>
                <div class="dropdown">
                    <button class="btn dropdown-toggle pe-3 border-0" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false"></button>
                    <ul class="p-4 py-2 dropdown-menu dropdown-menu-end">
                        <!-- <svg class="bi me-1" width="1em" height="1em"><use xlink:href="#calendar-event"></use></svg> -->
                        <li class="my-2"><span class="fs-6 me-4"><strong>Due</strong></span><span class=""><%= `${task.dateDue}` %></span></li>
                        <li class="my-2"><span class="fs-6 me-4"><strong>Projects</strong></span><span class="">
                            <% if (task.projects.length > 1) { %>
                                <% const lastProject = task.projects.pop(); %>
                                <% task.projects.forEach(taskProject => { %>
                                <% const taskProjectsStr = `${taskProject}, `; %>
                                <% task.projects.push(lastProject); %>
                                <%= taskProjectsStr + lastProject %>
                                <% }); %>
                            <% } else { %>
                                <%= `${task.projects}` %>
                            <% }; %>
                        </span></li>
                    </ul>
                </div>
            </div>
        </div>
        <% }); %>
        <div class="task add-task list-group-item d-flex align-items-center gap-3 py-3 border-0 rounded-2">
            <div class="col"><hr /></div>
            <div class="col-2 d-flex justify-content-center">
                <button class="add-task-btn btn btn-primary rounded-pill d-flex align-items-center justify-content-center p-0" type="button" data-bs-toggle="modal" data-bs-target="#addTaskModal">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                        <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                    </svg>
                </button>
            </div>
            <div class="col"><hr /></div>
        </div>
    </div>
</div>

<%- include('partials/footer.ejs') %>

